<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Routes | Relay Docs</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Routes | Relay Docs"><meta property="og:type" content="website"><meta property="og:url" content="http://facebook.github.io/relay/index.html"><meta property="og:description" content="A JavaScript framework for building data-driven React applications"><link rel="shortcut icon" href="/relay/img/favicon.png"><link rel="stylesheet" href="/relay/css/relay.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="/relay/"><img class="nav-logo" src="/relay/img/logo.svg" width="50" height="50">Relay</a><ul class="nav-site"><li><a href="/relay/prototyping/playground.html" class="">Try it out</a></li><li><a href="/relay/docs/getting-started.html#content" class="active">Docs</a></li><li><a href="/relay/support.html" class="">Support</a></li><li><a href="https://github.com/facebook/relay" class="">GitHub</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Quick Start</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/getting-started.html#content">Getting Started</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/tutorial.html#content">Tutorial</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/thinking-in-graphql.html#content">Thinking in GraphQL</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/thinking-in-relay.html#content">Thinking In Relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/videos.html#content">Videos</a></li></ul></div><div class="nav-docs-section"><h3>Guides</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/guides-containers.html#content">Containers</a></li><li><a style="margin-left:0;" class="active" href="/relay/docs/guides-routes.html#content">Routes</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-root-container.html#content">Root Container</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-ready-state.html#content">Ready State</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-mutations.html#content">Mutations</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-network-layer.html#content">Network Layer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-babel-plugin.html#content">Babel Relay Plugin</a></li></ul></div><div class="nav-docs-section"><h3>GraphQL</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-relay-specification.html#content">GraphQL Relay Specification</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-object-identification.html#content">Object Identification</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-connections.html#content">Connection</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-mutations.html#content">Mutations</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-further-reading.html#content">Further Reading</a></li></ul></div><div class="nav-docs-section"><h3>API Reference</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay.html#content">Relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-container.html#content">RelayContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-route.html#content">Relay.Route</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-renderer.html#content">Relay.Renderer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-root-container.html#content">Relay.RootContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-ql.html#content">Relay.QL</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-mutation.html#content">Relay.Mutation</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-proptypes.html#content">Relay.PropTypes</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-store.html#content">Relay.Store</a></li></ul></div><div class="nav-docs-section"><h3>Interfaces</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/interfaces-relay-network-layer.html#content">RelayNetworkLayer</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/interfaces-relay-mutation-request.html#content">RelayMutationRequest</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/interfaces-relay-query-request.html#content">RelayQueryRequest</a></li></ul></div></div><div class="inner-content"><a id="content"></a><a class="edit-page-link" href="https://github.com/facebook/relay/blob/master/docs/Guides-Routes.md" target="_blank">Edit on GitHub</a><h1>Routes</h1><div><p>Routes are responsible for defining the entry points into a Relay application. But in order to understand why routes are necessary, we must first understand the difference between GraphQL queries and fragments.</p><blockquote><p>Note</p><p>Relay routes don&#x27;t really implement any URL routing specific logic or work with History API. In the future we will maybe rename RelayRoute to be something more like RelayQueryRoots or RelayQueryConfig. For more information around why Relay doesn&#x27;t provide URL-routing features, and suggestions for such solutions, see <a href="https://medium.com/@cpojer/relay-and-routing-36b5439bad9" target="_blank">this post</a>.</p></blockquote><h2><a class="anchor" name="queries-vs-fragments"></a>Queries vs. Fragments <a class="hash-link" href="#queries-vs-fragments">#</a></h2><p>In GraphQL, <strong>queries</strong> declare fields that exist on the root query type. For example, the following query might fetch the name of the user with an <code>id</code> of <code>123</code>:</p><pre class="prism language-javascript">
query UserQuery <span class="token punctuation">{</span>
  <span class="token function">user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></pre><p>On the other hand, GraphQL <strong>fragments</strong> declare fields that exist on any arbitrary type. For example, the following fragment fetches the profile picture URI for <em>some</em> <code>User</code>.</p><pre class="prism language-javascript">
fragment UserProfilePhoto on User <span class="token punctuation">{</span>
  <span class="token function">profilePhoto</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> $size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    uri<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></pre><p>Fragments can be embedded within other fragments or queries. For example, the above fragment could be used to fetch user <code>123</code>&#x27;s profile photo:</p><pre class="prism language-javascript">
query UserQuery <span class="token punctuation">{</span>
  <span class="token function">user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>UserProfilePhoto<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></pre><p>However, the fragment could also fetch each of user <code>123</code>&#x27;s friends&#x27; profile photos:</p><pre class="prism language-javascript">
query UserQuery <span class="token punctuation">{</span>
  <span class="token function">user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">friends</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      edges <span class="token punctuation">{</span>
        node <span class="token punctuation">{</span>
          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>UserProfilePhoto<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></pre><p>Since Relay containers define fragments and not queries, they can be easily embedded in multiple contexts. Like React components, Relay containers are highly reusable.</p><h2><a class="anchor" name="routes-and-queries"></a>Routes and Queries <a class="hash-link" href="#routes-and-queries">#</a></h2><p>Routes are objects that define a set of root queries and input parameters. Here is a simple route that might be used to render user <code>123</code>&#x27;s profile:</p><pre class="prism language-javascript">
<span class="token keyword">var</span> profileRoute <span class="token operator">=</span> <span class="token punctuation">{</span>
  queries<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// Routes declare queries using functions that return a query root. Relay</span>
    <span spellcheck="true" class="token comment">// will automatically compose the `user` fragment from the Relay container</span>
    <span spellcheck="true" class="token comment">// paired with this route on a Relay.RootContainer</span>
    user<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Relay<span class="token punctuation">.</span>QL<span class="token template-string"><span class="token string">`
      # In Relay, the GraphQL query name can be optionally omitted.
      query { user(id: $userID) }
    `</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  params<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// This `userID` parameter will populate the `$userID` variable above.</span>
    userID<span class="token punctuation">:</span> <span class="token string">&#x27;123&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span spellcheck="true" class="token comment">// Routes must also define a string name.</span>
  name<span class="token punctuation">:</span> <span class="token string">&#x27;ProfileRoute&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><p>If we wanted to create an instance of this route for arbitrary users, we can subclass the <code>Relay.Route</code> abstract class. <code>Relay.Route</code> makes it easy to define a set of queries and required parameters to be re-used multiple times:</p><pre class="prism language-javascript">
<span class="token keyword">class</span> <span class="token class-name">ProfileRoute</span> <span class="token keyword">extends</span> <span class="token class-name">Relay<span class="token punctuation">.</span>Route</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> queries <span class="token operator">=</span> <span class="token punctuation">{</span>
    user<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Relay<span class="token punctuation">.</span>QL<span class="token template-string"><span class="token string">`
      query { user(id: $userID) }
    `</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> paramDefinitions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// By setting `required` to true, `ProfileRoute` will throw if a `userID`</span>
    <span spellcheck="true" class="token comment">// is not supplied when instantiated.</span>
    userID<span class="token punctuation">:</span> <span class="token punctuation">{</span>required<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> routeName <span class="token operator">=</span> <span class="token string">&#x27;ProfileRoute&#x27;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><p>Now we can instantiate a <code>ProfileRoute</code> that fetches data for user <code>123</code>:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// Equivalent to the object literal we created above.</span>
<span class="token keyword">var</span> profileRoute <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProfileRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>userID<span class="token punctuation">:</span> <span class="token string">&#x27;123&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>But now, we can also create routes for arbitrary user IDs. For example, if we wanted to construct a route that fetched data for a user defined by the <code>userID</code> query parameter, we might use:</p><pre class="prism language-javascript">
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;popstate&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> userID <span class="token operator">=</span> <span class="token function">getQueryParamFromURI</span><span class="token punctuation">(</span><span class="token string">&#x27;userID&#x27;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> profileRoute <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProfileRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>userID<span class="token punctuation">:</span> userID<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Relay<span class="token punctuation">.</span>RootContainer
      Component<span class="token operator">=</span><span class="token punctuation">{</span>UserProfile<span class="token punctuation">}</span>
      route<span class="token operator">=</span><span class="token punctuation">{</span>profileRoute<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#x27;app&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div><div class="docs-prevnext"><a class="docs-next" href="guides-root-container.html#content">Next →</a></div></div></section><footer class="wrap"><div class="right">©2016 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-71174216-1', 'auto');
              ga('send', 'pageview');
          </script></body></html>